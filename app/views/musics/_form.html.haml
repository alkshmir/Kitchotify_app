%h6.mb-3 *がついている項目は必須です
=form_with(model: [album, music], local: local) do |form|
  .row
    .col-5
      .row.mb-2
        .col-2.col-form-label 曲名*
        .col= form.text_field :name, class: "form-control", required: :required
      .row
        .col-2.col-form-label 名義*
        .col= form.text_field :artist_name, class: "form-control", list: 'artist-list', value: music.artist&.name, required: :required
      .row.mb-2
        .col-2
        .col.form-text 名義が存在しない場合は下のフォームから追加してください。
      %datalist#artist-list
        - @artists.each do |artist|
          %option{value: artist.name}
      .row.mb-2
        .col-2.col-form-label Tr.*
        .col= form.number_field :track, class: "form-control", min: 0, max: 999, required: :required
      .row.mb-2
        .col-2
        .col.form-text 曲順が決まっていない場合は適当な数字で登録してください。
      .row
        .col-2.col-form-label 音源
        .col= form.file_field :audio, class: "form-control", accept: "audio/mpeg", value: music.audio
      = hidden_field_tag :at_album_show, at_album_show
      .row
        .col-2
        .col= music&.audio&.attached? ? "audioが存在します" : "audioが存在しません"
      - if music.audio.attached?
        .row
          .col-2
          .col
            %audio{src: music.audio.url, controls: 'controls'}
    .col
      .row.h-100
        .col-1.col-form-label その他
        .col.h-100= form.text_area :index_info, class: "form-control h-100", placeholder: "ジャンル：□□□\nBPM：△△△\nコメント：▽▽▽\n歌詞：～～\nのように記述してください。"
  .row.mt-3
    .overflow-hidden.col=button_tag action, type: :submit, class: "btn btn-primary float-end", data: { confirm: confirm }

%hr
%h5 アーティストを追加
=render 'artists/form', action: "作成", artist: Artist.new, local: false, edit: false

- if edit && current_user.admin?
  = link_to '削除', album_music_path(album, music), method: :delete, data: { confirm: "本当に消しますか" }, class: "text-white btn btn-danger float-end mt-3"

